<?xml version="1.0"?>
<!--
  ~ Copyright Magmodules.eu. All rights reserved.
  ~ See COPYING.txt for license details.
  -->

<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <preference for="Mollie\Payment\Api\Webapi\PaymentTokenRequestInterface" type="Mollie\Payment\Webapi\PaymentToken" />
    <preference for="Mollie\Payment\Api\Webapi\StartTransactionRequestInterface" type="Mollie\Payment\Webapi\StartTransaction" />
    <preference for="Mollie\Payment\Api\Webapi\GetCustomerOrderInterface" type="Mollie\Payment\Webapi\GetCustomerOrder" />
    <preference for="Mollie\Payment\Api\Webapi\GetPaymentLinkRedirectInterface" type="Mollie\Payment\Webapi\GetPaymentLinkRedirect" />
    <preference for="Mollie\Payment\Api\Webapi\ResetCartInterface" type="Mollie\Payment\Webapi\ResetCart" />
    <preference for="Mollie\Payment\Api\MagentoOrderRepositoryInterface" type="Mollie\Payment\Model\MagentoOrderRepository" />

    <preference for="Mollie\Payment\Api\PaymentTokenRepositoryInterface" type="Mollie\Payment\Model\PaymentTokenRepository"/>
    <preference for="Mollie\Payment\Api\Data\PaymentTokenInterface" type="Mollie\Payment\Model\Data\PaymentToken"/>

    <preference for="Mollie\Payment\Api\MollieCustomerRepositoryInterface" type="Mollie\Payment\Model\MollieCustomerRepository"/>
    <preference for="Mollie\Payment\Api\Data\MollieCustomerInterface" type="Mollie\Payment\Model\Data\MollieCustomer"/>

    <preference for="Mollie\Payment\Api\PendingPaymentReminderRepositoryInterface" type="Mollie\Payment\Model\PendingPaymentReminderRepository"/>
    <preference for="Mollie\Payment\Api\Data\PendingPaymentReminderInterface" type="Mollie\Payment\Model\Data\PendingPaymentReminder"/>
    <preference for="Mollie\Payment\Api\Data\PendingPaymentReminderSearchResultsInterface" type="Magento\Framework\Api\SearchResults"/>

    <preference for="Mollie\Payment\Api\SentPaymentReminderRepositoryInterface" type="Mollie\Payment\Model\SentPaymentReminderRepository"/>
    <preference for="Mollie\Payment\Api\Data\SentPaymentReminderInterface" type="Mollie\Payment\Model\Data\SentPaymentReminder"/>
    <preference for="Mollie\Payment\Api\Data\SentPaymentReminderSearchResultsInterface" type="Magento\Framework\Api\SearchResults"/>

    <preference for="Mollie\Payment\Api\ApiKeyFallbackRepositoryInterface" type="Mollie\Payment\Model\ApiKeyFallbackRepository" />
    <preference for="Mollie\Payment\Api\Data\ApiKeyFallbackInterface" type="Mollie\Payment\Model\Data\ApiKeyFallback"/>
    <preference for="Mollie\Payment\Api\Data\ApiKeyFallbackSearchResultsInterface" type="Magento\Framework\Api\SearchResults"/>

    <preference for="Mollie\Payment\Api\TransactionToOrderRepositoryInterface" type="Mollie\Payment\Model\TransactionToOrderRepository" />
    <preference for="Mollie\Payment\Api\Data\TransactionToOrderInterface" type="Mollie\Payment\Model\TransactionToOrder"/>
    <preference for="Mollie\Payment\Api\Data\TransactionToOrderSearchResultsInterface" type="Mollie\Payment\Model\TransactionToOrderSearchResults"/>
    <preference for="Mollie\Payment\Api\TransactionToOrderManagementInterface" type="Mollie\Payment\Model\TransactionToOrderManagement" />

    <preference for="Mollie\Payment\Api\Webapi\PaymentInformationMetaInterface" type="Mollie\Payment\Webapi\PaymentInformationMeta"/>
    <preference for="Mollie\Payment\Api\Data\MethodMetaInterface" type="Mollie\Payment\Model\MethodMeta" />
    <preference for="Mollie\Payment\Api\Data\IssuerInterface" type="Mollie\Payment\Model\Issuer" />
    <preference for="Mollie\Payment\Api\Data\TerminalInterface" type="Mollie\Payment\Model\Terminal" />

    <preference for="Mollie\Payment\Api\Data\TransactionToProcessInterface" type="Mollie\Payment\Model\Queue\TransactionToProcess"/>

    <preference for="Mollie\Payment\Api\Data\PaymentLinkRedirectResultInterface" type="Mollie\Payment\Service\Magento\PaymentLinkRedirectResult"/>

    <type name="Mollie\Payment\Config">
        <arguments>
            <argument name="productMetadata" xsi:type="object">Magento\Framework\App\ProductMetadataInterface\Proxy</argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Logger\MollieLogger">
        <arguments>
            <argument name="logger" xsi:type="object">mollieLogger</argument>
            <argument name="handler" xsi:type="object">Mollie\Payment\Logger\MollieHandler</argument>
        </arguments>
    </type>

    <virtualType name="mollieLogger" type="Monolog\Logger">
        <arguments>
            <argument name="name" xsi:type="string">mollie-logger</argument>
        </arguments>
    </virtualType>

    <!-- Set sensitive information -->
    <type name="Magento\Config\Model\Config\TypePool">
        <arguments>
            <argument name="sensitive" xsi:type="array">
                <item name="payment/mollie_general/apikey_test" xsi:type="string">1</item>
                <item name="payment/mollie_general/apikey_live" xsi:type="string">1</item>
            </argument>
            <argument name="environment" xsi:type="array">
                <item name="payment/mollie_general/apikey_test" xsi:type="string">1</item>
                <item name="payment/mollie_general/apikey_live" xsi:type="string">1</item>
                <item name="payment/mollie_general/type" xsi:type="string">1</item>
                <item name="payment/mollie_general/debug" xsi:type="string">1</item>
                <item name="payment/mollie_general/use_webhooks" xsi:type="string">1</item>
                <item name="payment/mollie_general/custom_webhook_url" xsi:type="string">1</item>
                <item name="payment/mollie_general/use_custom_redirect_url" xsi:type="string">1</item>
                <item name="payment/mollie_general/custom_redirect_url" xsi:type="string">1</item>
            </argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Model\Client\Orders">
        <arguments>
            <argument name="checkoutSession" xsi:type="object">Magento\Checkout\Model\Session\Proxy</argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Model\Client\Payments">
        <arguments>
            <argument name="checkoutSession" xsi:type="object">Magento\Checkout\Model\Session\Proxy</argument>
        </arguments>
    </type>

    <type name="Magento\Sales\Api\OrderRepositoryInterface">
        <plugin name="mollie_payment_fee_order" type="Mollie\Payment\Plugin\Sales\AddPaymentFeeToOrder" />
        <plugin name="mollie_payment_add_subscription_data" type="Mollie\Payment\Plugin\Sales\AddRecurringData" />
    </type>

    <type name="Magento\Sales\Api\OrderManagementInterface">
        <plugin name="mollie_order_management-plugin" type="Mollie\Payment\Plugin\Sales\Api\OrderManagementPlugin" />
    </type>

    <type name="Magento\Quote\Api\CartRepositoryInterface">
        <plugin name="mollie_add_paymentfee_extension_attributes" type="Mollie\Payment\Plugin\Sales\Cart\AddPaymentFeeToCart" />
    </type>

    <type name="Magento\Quote\Api\Data\CartInterface">
        <plugin name="mollie_parse_metadata" type="Mollie\Payment\Plugin\Quote\Api\ParseMollieMetadata" />
    </type>

    <type name="Magento\Quote\Api\Data\CartItemInterface">
        <plugin name="mollie_make_recurring_products_unique_in_cart" type="Mollie\Payment\Plugin\Quote\Api\Item\MakeRecurringProductsUniqueInCart" />
    </type>

    <type name="Mollie\Payment\Service\Order\BuildTransaction">
        <arguments>
            <argument name="parts" xsi:type="array">
                <item name="cardToken" xsi:type="object">Mollie\Payment\Service\Order\TransactionPart\CardToken</item>
                <item name="customerId" xsi:type="object">Mollie\Payment\Service\Order\TransactionPart\CustomerId</item>
                <item name="issuer" xsi:type="object">Mollie\Payment\Service\Order\TransactionPart\Issuer</item>
                <item name="applePayPaymentToken" xsi:type="object">Mollie\Payment\Service\Order\TransactionPart\ApplePayPaymentToken</item>
                <item name="sequenceTypeForVault" xsi:type="object">Mollie\Payment\Service\Order\TransactionPart\SequenceType</item>
                <item name="UseSavedPaymentMethod" xsi:type="object">Mollie\Payment\Service\Order\TransactionPart\UseSavedPaymentMethod</item>
                <item name="PhoneNumber" xsi:type="object">Mollie\Payment\Service\Order\TransactionPart\PhoneNumber</item>
                <item name="DateOfBirth" xsi:type="object">Mollie\Payment\Service\Order\TransactionPart\DateOfBirth</item>
                <item name="CaptureMode" xsi:type="object">Mollie\Payment\Service\Order\TransactionPart\CaptureMode</item>
                <item name="terminalId" xsi:type="object">Mollie\Payment\Service\Order\TransactionPart\TerminalId</item>
                <item name="LimitStreetLength" xsi:type="object">Mollie\Payment\Service\Order\TransactionPart\LimitStreetLength</item>
                <item name="LimitedMethods" xsi:type="object">Mollie\Payment\Service\Order\TransactionPart\LimitedMethods</item>
            </argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Service\Order\Uncancel">
        <arguments>
            <argument name="uncancelOrderItemReservation" xsi:type="object">\Mollie\Payment\Service\Order\Uncancel\OrderReservation\Proxy</argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Service\Order\SecondChanceEmail">
        <arguments>
            <argument name="identityContainer" xsi:type="object">Magento\Sales\Model\Order\Email\Container\OrderIdentity</argument>
        </arguments>
    </type>

    <type name="Magento\Customer\Api\CustomerRepositoryInterface">
        <plugin name="mollie_customer_id_extension_attributes" type="Mollie\Payment\Plugin\Customer\CustomerId" />
    </type>

    <type name="Mollie\Payment\Service\Order\Lines\OrderLinesProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="voucherCategory" xsi:type="object">Mollie\Payment\Service\Order\Lines\Processor\VoucherCategory</item>
                <item name="bundleWithoutDynamicPrice" xsi:type="object">Mollie\Payment\Service\Order\Lines\Processor\BundleWithoutDynamicPricing</item>
                <item name="mollie_buyrequest_to_metadata" xsi:type="object">Mollie\Payment\Service\Order\Lines\BuyRequestToMetadata</item>
            </argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Service\Order\Lines\OrderLinesGenerator">
        <arguments>
            <argument name="generators" xsi:type="array">
                <item name="fooman_totals" xsi:type="object">Mollie\Payment\Service\Order\Lines\Generator\FoomanTotals</item>
                <item name="weee_fee" xsi:type="object">Mollie\Payment\Service\Order\Lines\Generator\WeeeFeeGenerator</item>
                <item name="mageworx_rewardpoints" xsi:type="object">Mollie\Payment\Service\Order\Lines\Generator\MageWorxRewardPoints</item>
                <item name="amasty_extrafee" xsi:type="object">Mollie\Payment\Service\Order\Lines\Generator\AmastyExtraFee</item>
                <item name="aheadworks_addfreegift" xsi:type="object">Mollie\Payment\Service\Order\Lines\Generator\AheadworksAddFreeGift</item>
                <item name="magento_giftcard" xsi:type="object">Mollie\Payment\Service\Order\Lines\Generator\MagentoGiftCard</item>
                <item name="magento_giftwrapping" xsi:type="object">Mollie\Payment\Service\Order\Lines\Generator\MagentoGiftWrapping</item>
                <item name="geissweb_euvat" xsi:type="object">Mollie\Payment\Service\Order\Lines\Generator\GeisswebEuvat</item>
                <item name="cart_rule_discount" xsi:type="object">Mollie\Payment\Service\Order\Lines\Generator\ShippingDiscount</item>
                <item name="magento_reward_points" xsi:type="object">Mollie\Payment\Service\Order\Lines\Generator\MagentoRewardPoints</item>
            </argument>
        </arguments>
    </type>

    <type name="Magento\Framework\View\Element\UiComponent\DataProvider\CollectionFactory">
        <arguments>
            <argument name="collections" xsi:type="array">
                <item name="mollie_pending_payment_reminders_data_source" xsi:type="string">PendingPaymentReminderCollection</item>
                <item name="mollie_sent_payment_reminders_data_source" xsi:type="string">SentPaymentReminderCollection</item>
            </argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Controller\ApplePay\PlaceOrder">
        <arguments>
            <argument xsi:type="object" name="checkoutSession">Magento\Checkout\Model\Session\Proxy</argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Controller\ApplePay\BuyNowPlaceOrder">
        <arguments>
            <argument xsi:type="object" name="checkoutSession">Magento\Checkout\Model\Session\Proxy</argument>
        </arguments>
    </type>

    <virtualType name="PendingPaymentReminderCollection" type="Mollie\Payment\Ui\DataProvider\PaymentReminder\Listing\Pending\Collection">
        <arguments>
            <argument name="mainTable" xsi:type="string">mollie_pending_payment_reminder</argument>
            <argument name="resourceModel" xsi:type="string">Mollie\Payment\Model\ResourceModel\PendingPaymentReminder</argument>
        </arguments>
    </virtualType>

    <virtualType name="SentPaymentReminderCollection" type="Mollie\Payment\Ui\DataProvider\PaymentReminder\Listing\Sent\Collection">
        <arguments>
            <argument name="mainTable" xsi:type="string">mollie_sent_payment_reminder</argument>
            <argument name="resourceModel" xsi:type="string">Mollie\Payment\Model\ResourceModel\SentPaymentReminder</argument>
        </arguments>
    </virtualType>

    <type name="Magento\Framework\View\Asset\Minification">
        <plugin name="disable_minification_for_components_js" type="Mollie\Payment\Plugin\Framework\View\Asset\DisableMinificationForComponentsJs" />
    </type>

    <type name="Mollie\Payment\Observer\ControllerActionPredispatchCheckoutIndexIndex\RestoreQuoteOfUnsuccessfulPayment">
        <arguments>
            <argument name="checkoutSession" xsi:type="object">Magento\Checkout\Model\Session\Proxy</argument>
        </arguments>
    </type>

    <type name="Magento\Quote\Api\PaymentMethodManagementInterface">
        <plugin name="mollie_hide_methods_that_are_not_allowed" type="Mollie\Payment\Plugin\Quote\Api\PaymentMethodManagementPlugin" />
        <plugin name="mollie_hide_methods_when_cart_contains_recurring_product" type="Mollie\Payment\Plugin\Quote\Api\LimitMethodsForRecurringPayments" />
    </type>

    <type name="Mollie\Payment\Service\Order\TransactionProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="saveRemainingAmount" xsi:type="object">Mollie\Payment\Service\Order\ProcessTransaction\SaveRemainingAmount</item>
            </argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Service\Order\Reorder">
        <arguments>
            <argument name="checkoutSession" xsi:type="object">Magento\Checkout\Model\Session\Proxy</argument>
        </arguments>
    </type>

    <type name="Magento\Config\Model\Config\Loader">
        <plugin name="mollie_load_correct_group" type="Mollie\Payment\Plugin\Config\LoadCorrectGroup" />
    </type>

    <type name="Magento\Catalog\Model\Attribute\Config">
        <plugin name="mollie_add_mealvoucher_category_to_loaded_attribute" type="Mollie\Payment\Plugin\Catalog\Model\AddMealVoucherCategoryToLoadedAttributes" />
    </type>

    <type name="Mollie\Payment\Service\Mollie\MethodParameters">
        <arguments>
            <argument name="parametersParts" xsi:type="array"></argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Service\LockService">
        <arguments>
            <argument name="resourceConnection" xsi:type="object">Magento\Framework\App\ResourceConnection\Proxy</argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Model\Mollie">
        <arguments>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Mollie\Payment\Block\Info\Base</argument>
            <argument name="valueHandlerPool" xsi:type="object">MollieValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">MollieCommandPool</argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Observer\CheckoutSubmitAllAfter\StartTransactionForInstantPurchaseOrders">
        <arguments>
            <argument name="mollie" xsi:type="object">Mollie\Payment\Model\Mollie\Proxy</argument>
        </arguments>
    </type>

    <type name="Magento\InstantPurchase\Controller\Button\PlaceOrder">
        <plugin name="mollie_add_redirect_url" type="Mollie\Payment\Plugin\InstantPurchase\Button\PlaceOrderAddRedirectUrl" />
    </type>

    <type name="Mollie\Payment\Model\Client\Orders\ProcessTransaction">
        <arguments>
            <argument name="orderProcessors" xsi:type="object">Mollie\Payment\Model\Client\Orders\OrderProcessors</argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Model\Client\Payments\ProcessTransaction">
        <arguments>
            <argument name="checkoutSession" xsi:type="object">Magento\Checkout\Model\Session\Proxy</argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Model\Client\Orders\OrderProcessors">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="preprocess" xsi:type="array">
                    <item name="add_additional_data" xsi:type="object">Mollie\Payment\Model\Client\Orders\Processors\AddAdditionalInformation</item>
                    <item name="save_card_label" xsi:type="object">Mollie\Payment\Model\Client\Orders\Processors\SaveCardDetails</item>
                    <item name="payment_link_save_payment_method" xsi:type="object">Mollie\Payment\Model\Client\Orders\Processors\PaymentLinkPaymentMethod</item>
                </item>
                <item name="last_payment_status_is_failure" xsi:type="array">
                    <item name="last_payment_status_is_failure" xsi:type="object">Mollie\Payment\Model\Client\Orders\Processors\LastPaymentStatusIsFailure</item>
                </item>
                <item name="created" xsi:type="array">
                    <item name="send_confirmation_email_for_banktransfer" xsi:type="object">Mollie\Payment\Model\Client\Orders\Processors\SendConfirmationEmailForBanktransfer</item>
                </item>
                <item name="cancelled" xsi:type="array">
                    <item name="cancelled" xsi:type="object">Mollie\Payment\Model\Client\Orders\Processors\CancelledProcessor</item>
                </item>
                <item name="expired" xsi:type="array">
                    <item name="expired" xsi:type="object">Mollie\Payment\Model\Client\Orders\Processors\ExpiredProcessor</item>
                </item>
                <item name="is_successful" xsi:type="array">
                    <item name="is_successful" xsi:type="object">Mollie\Payment\Model\Client\Orders\Processors\SuccessfulPayment</item>
                </item>
            </argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Model\Client\Payments\PaymentProcessors">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="preprocess" xsi:type="array">
                    <item name="add_additional_data" xsi:type="object">Mollie\Payment\Model\Client\Payments\Processors\AddAdditionalInformation</item>
                </item>
                <item name="failed" xsi:type="array">
                    <item name="failed" xsi:type="object">Mollie\Payment\Model\Client\Payments\Processors\FailedStatusProcessor</item>
                </item>
                <item name="expired" xsi:type="array">
                    <item name="failed" xsi:type="object">Mollie\Payment\Model\Client\Payments\Processors\ExpiredStatusProcessor</item>
                </item>
                <item name="open" xsi:type="array">
                    <item name="open" xsi:type="object">Mollie\Payment\Model\Client\Payments\Processors\SendEmailForBanktransfer</item>
                </item>
                <item name="paid" xsi:type="array">
                    <item name="paid" xsi:type="object">Mollie\Payment\Model\Client\Payments\Processors\SuccessfulPayment</item>
                </item>
            </argument>
        </arguments>
    </type>

    <type name="Magento\InventorySales\Model\IsProductSalableForRequestedQtyCondition\IsSalableWithReservationsCondition">
        <plugin name="mollie_disable_stock_check_for_admin_orders" type="Mollie\Payment\Plugin\InventorySales\Model\IsProductSalableForRequestedQtyCondition\IsSalableWithReservationsCondition\DisableCheckForAdminOrders" />
    </type>

    <type name="Mollie\Payment\Block\Applepay\Shortcut\Button">
        <arguments>
            <argument name="checkoutSession" xsi:type="object">Magento\Checkout\Model\Session\Proxy</argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Controller\ApplePay\ShippingMethods">
        <arguments>
            <argument name="checkoutSession" xsi:type="object">Magento\Checkout\Model\Session\Proxy</argument>
        </arguments>
    </type>

    <virtualType name="ScandiPWA\Router\Controller\ConfigurableRouter" type="ScandiPWA\Router\Controller\Router">
        <arguments>
            <argument name="ignoredURLs" xsi:type="array">
                <item name="mollie-webhook" xsi:type="string">^/mollie/checkout/webhook.*</item>
                <item name="mollie-secondchance" xsi:type="string">^/mollie/checkout/secondchance.*</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Mollie\Payment\Block\Checkout\CheckoutConfig">
        <arguments>
            <argument name="checkoutSession" xsi:type="object">Magento\Checkout\Model\Session\Proxy</argument>
        </arguments>
    </type>

    <type name="Mollie\Payment\Service\Mollie\MollieApiClient">
        <arguments>
            <argument name="fetchFallbackApiKeys" xsi:type="object">Mollie\Payment\Service\Mollie\Wrapper\FetchFallbackApiKeys\Proxy</argument>
        </arguments>
    </type>

    <type name="Magento\CustomerBalance\Observer\RevertStoreCreditObserver">
        <plugin name="mollie_prevent_double_credit_revert" type="Mollie\Payment\Plugin\CustomerBalance\Observer\PreventDoubleCreditRevert" />
    </type>

    <virtualType name="CleanExpiredOrdersCollectionFactory"
                 type="Magento\Sales\Model\ResourceModel\Order\CollectionFactory">
        <arguments>
            <argument name="instanceName" xsi:type="string">Mollie\Payment\Model\Cronjob\CleanExpiredOrdersCollection
            </argument>
        </arguments>
    </virtualType>

    <type name="Magento\Sales\Model\CronJob\CleanExpiredOrders">
        <arguments>
            <argument name="collectionFactory" xsi:type="object">CleanExpiredOrdersCollectionFactory</argument>
        </arguments>
    </type>

    <!-- Payment methods configuration start -->
    <!-- ApplePay -->
    <type name="Mollie\Payment\Model\Methods\ApplePay">
        <arguments>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Mollie\Payment\Block\Info\Base</argument>
            <argument name="valueHandlerPool" xsi:type="object">MollieApplePayValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">MollieCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">MollieApplePayValidatorPool</argument>
        </arguments>
    </type>

    <virtualType name="MollieApplePayValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">MollieApplePayConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieApplePayConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">MollieApplePayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieApplePayConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Mollie\Payment\Model\Methods\ApplePay::CODE</argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieApplePayValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">MollieApplePayCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieApplePayCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">MollieApplePayConfig</argument>
        </arguments>
    </virtualType>

    <!-- Creditcard -->
    <type name="Mollie\Payment\Model\Methods\Creditcard">
        <arguments>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Mollie\Payment\Block\Info\Base</argument>
            <argument name="valueHandlerPool" xsi:type="object">MollieCreditcardValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">MollieCreditcardCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">MollieCreditcardValidatorPool</argument>
        </arguments>
    </type>

    <virtualType name="MollieCreditcardCommandPool" type="MollieCommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="vault_authorize" xsi:type="string">MollieCreditcardVaultAuthorizeCommand</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieCreditcardValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">MollieCreditcardConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieCreditcardConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">MollieCreditcardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieCreditcardConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Mollie\Payment\Model\Methods\Creditcard::CODE</argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieCreditcardValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">MollieCreditcardCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieCreditcardCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">MollieCreditcardConfig</argument>
        </arguments>
    </virtualType>

    <!-- Creditcard Vault -->
    <type name="Mollie\Payment\Model\Methods\CreditcardVault">
        <arguments>
            <argument name="config" xsi:type="object">MollieCreditcardVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">MollieCreditcardVaultValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">Mollie\Payment\Model\Methods\Creditcard</argument>
            <argument name="code" xsi:type="const">Mollie\Payment\Model\Methods\CreditcardVault::CODE</argument>
            <argument name="validatorPool" xsi:type="object">MollieCreditcardVaultValidatorPool</argument>
        </arguments>
    </type>

    <virtualType name="MollieCreditcardVaultValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">MollieCreditcardConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieCreditcardVaultConfig" type="Mollie\Payment\Model\Data\CreditcardVaultConfig">
        <arguments>
            <argument name="methodCode" xsi:type="const">Mollie\Payment\Model\Methods\Creditcard::CODE</argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieCreditcardVaultValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">MollieCreditcardVaultCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieCreditcardVaultCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">MollieCreditcardVaultConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="MollieCreditcardVaultAuthorizeCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">
    </virtualType>

    <!-- Google Pay -->
        <arguments>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Mollie\Payment\Block\Info\Base</argument>
            <argument name="commandPool" xsi:type="object">MollieCommandPool</argument>
        </arguments>
    </type>

        <arguments>
            <argument name="handlers" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

        <arguments>
        </arguments>
    </virtualType>

        <arguments>
        </arguments>
    </virtualType>

        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

        <arguments>
        </arguments>
    </virtualType>

    <!-- Paymentlink -->
    <type name="Mollie\Payment\Model\Methods\Paymentlink">
        <arguments>
            <argument name="formBlockType" xsi:type="string">Mollie\Payment\Block\Form\Paymentlink</argument>
            <argument name="infoBlockType" xsi:type="string">Mollie\Payment\Block\Info\Paymentlink</argument>
            <argument name="valueHandlerPool" xsi:type="object">MolliePaymentlinkValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">MollieCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">MolliePaymentlinkValidatorPool</argument>
        </arguments>
    </type>

    <virtualType name="MolliePaymentlinkValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">MolliePaymentlinkConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="MolliePaymentlinkConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">MolliePaymentlinkConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="MolliePaymentlinkConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Mollie\Payment\Model\Methods\Paymentlink::CODE</argument>
        </arguments>
    </virtualType>

    <virtualType name="MolliePaymentlinkValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">MolliePaymentlinkCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="MolliePaymentlinkCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">MolliePaymentlinkConfig</argument>
        </arguments>
    </virtualType>

    <!-- Point Of Sale -->
        <arguments>
            <argument name="formBlockType" xsi:type="string">Mollie\Payment\Block\Form\Pointofsale</argument>
            <argument name="infoBlockType" xsi:type="string">Mollie\Payment\Block\Info\Base</argument>
            <argument name="commandPool" xsi:type="object">MollieCommandPool</argument>
        </arguments>
    </type>

        <arguments>
            <argument name="handlers" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

        <arguments>
        </arguments>
    </virtualType>

        <arguments>
        </arguments>
    </virtualType>

        <arguments>
            <argument name="validators" xsi:type="array">
            </argument>
        </arguments>
    </virtualType>

        <arguments>
        </arguments>
    </virtualType>

